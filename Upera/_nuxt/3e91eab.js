(window.webpackJsonp=window.webpackJsonp||[]).push([[12,40],{730:function(t,e,n){"use strict";var o=n(25),r=n(147).findIndex,l=n(167),d="findIndex",c=!0;d in[]&&Array(1)[d](function(){c=!1}),o({target:"Array",proto:!0,forced:c},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),l(d)},735:function(t,e,n){t.exports={}},741:function(t,e,n){"use strict";n.r(e);n(32),n(46),n(40),n(17),n(21),n(22),n(16);var o=n(23),r=n(69),l=n(49),d=n(3),c=(n(59),n(13),n(730),n(778),n(45),n(168),n(780),n(136),n(18),n(11),n(455),n(29),n(44),n(35));function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach(function(e){Object(d.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var h={name:"Download",props:{show:Boolean,staticmodal:Boolean,viewOnly:{type:Boolean,default:!1},id:{type:String,default:null},posterf:{type:String,default:null},backdrop:{type:String,default:null},name:{type:String,default:null},namefa:{type:String,default:null},type:{type:String,default:null},itemdata:{type:Object,default:null},season:{type:[Array,Object],default:null}},data:function(){return{loading:!1,error:null,processing:!1,paymentMethod:"sep",mobile:null,mobileError:"",useWallet:!1,useWalletCredit:!1,showAddMoreDropdown:!1,addedItems:[],availableItems:[],isMobile:!1,isDrawerVisible:!1,paymentMethods:[{value:"sep",name:"درگاه بانکی",description:"پرداخت با کلیه کارت‌های بانکی",icon:"BankIcon",src:"Shaparak.png"},{value:"directdebit",name:"پرداخت خودکار",description:"پرداخت با اعتبار حساب آپرا",icon:"OperaCreditIcon",src:"directdebit.png"}]}},computed:m(m(m({},Object(c.c)({user:"auth/user"})),Object(c.c)({my_credit:"my_credit"})),{},{userState:function(){var t;return this.$auth.loggedIn?null!==(t=this.$store)&&void 0!==t&&null!==(t=t.state)&&void 0!==t&&t.basketActive?1:2:3},userLogin:function(){return this.$auth.loggedIn},showAddMoreButton:function(){var t;return null===(t=this.$store)||void 0===t||null===(t=t.state)||void 0===t?void 0:t.basketActive},showPaymentMethods:function(){return 1===this.userState||2===this.userState},showWalletSection:function(){return 1===this.userState||2===this.userState},showMobileInput:function(){return 3===this.userState},subtotalAmount:function(){return this.addedItems.reduce(function(t,e){return t+e.tvod_price},0)},taxAmount:function(){return Math.floor(.1*this.subtotalAmount)},totalAmount:function(){return this.subtotalAmount+this.taxAmount},canPurchase:function(){return(1===this.userState||2===this.userState||3===this.userState)&&this.subtotalAmount>0},hasEnoughWalletBalance:function(){return this.myCreditValue>=this.totalAmount},myCreditValue:function(){if(!this.my_credit)return 0;var t=this.my_credit.replace(/[^\d.]/g,"");return Number(t)||0},mobileDisplay:{get:function(){return this.convertDigitsToPersian(this.mobile||"")},set:function(t){var e=this.convertDigitsToEnglish(t||"");this.mobile=e.replace(/\s+/g,"")}}}),watch:{show:function(t){if(t){this.showModal(),this.syncWithCart();var e=!1;try{(e="1"===localStorage.getItem("_download_skip_main_item"))&&localStorage.removeItem("_download_skip_main_item")}catch(t){console.error("Failed to read skip flag:",t)}this.viewOnly||e||this.loadContentData(this.type,this.id),this.loadAvailableItems()}else this.hideModal()},useWalletCredit:function(t){this.paymentMethod=t?"credit":"sep"},addedItems:{deep:!0,handler:function(){this.syncToCart()}}},mounted:function(){this.setupModalEvents(),this.syncWithCart(),this.checkIfMobile(),window.addEventListener("resize",this.checkIfMobile),this.show&&(this.showModal(),this.viewOnly||this.loadContentData(this.type,this.id),this.loadAvailableItems())},beforeDestroy:function(){window.removeEventListener("resize",this.checkIfMobile),document.body.style.overflow=""},methods:{checkIfMobile:function(){this.isMobile=window.innerWidth<768},setupModalEvents:function(){var t,e=this;null===(t=this.$refs.downloadLinks)||void 0===t||t.$on("hide",function(){e.cleanup(),e.$emit("hide-modal")})},syncWithCart:function(){try{var t;if(null===(t=this.$store)||void 0===t||null===(t=t.state)||void 0===t||!t.basketActive)return localStorage.removeItem("_cart"),this.addedItems=[],void this.emitCartChange();var e=localStorage.getItem("_cart");if(e){var n=JSON.parse(e);n.content&&Array.isArray(n.content)&&(this.addedItems=n.content)}}catch(t){console.error("Error syncing with cart:",t)}},syncToCart:function(){try{var t;if(null===(t=this.$store)||void 0===t||null===(t=t.state)||void 0===t||!t.basketActive)return localStorage.removeItem("_cart"),void this.emitCartChange();var e={content:Array.isArray(this.addedItems)?this.addedItems.map(function(t){return t&&"object"===Object(l.a)(t)?m(m({},t),{},{id:void 0!==t.id&&null!==t.id?String(t.id):t.id}):t}):[],amount:this.totalAmount};localStorage.setItem("_cart",JSON.stringify(e)),this.emitCartChange()}catch(t){console.error("Error syncing to cart:",t)}},emitCartChange:function(){try{var t=new StorageEvent("storage",{key:"_cart"});window.dispatchEvent(t)}catch(t){window.dispatchEvent(new Event("storage"))}this.$root.$emit("cart-updated")},addToCart:function(t){try{var e;if(null===(e=this.$store)||void 0===e||null===(e=e.state)||void 0===e||!e.basketActive)return this.addedItems=[t],localStorage.removeItem("_cart"),void this.emitCartChange();var n=localStorage.getItem("_cart"),o=n?JSON.parse(n):{content:[]},content=Array.isArray(o.content)?Object(r.a)(o.content):[],l=content.findIndex(function(e){return(null==e?void 0:e.id)===t.id});-1===l?content.push(t):content.splice(l,1,t),this.addedItems=content}catch(t){console.error("Error adding to cart:",t)}},removeFromCart:function(t){try{var e;if(null===(e=this.$store)||void 0===e||null===(e=e.state)||void 0===e||!e.basketActive)return this.addedItems=this.addedItems.filter(function(e){return e.id!==t}),localStorage.removeItem("_cart"),void this.emitCartChange();var n=localStorage.getItem("_cart"),o=n?JSON.parse(n):{content:[]},content=Array.isArray(o.content)?o.content.filter(function(e){return(null==e?void 0:e.id)!==t}):[];this.addedItems=content}catch(t){console.error("Error removing from cart:",t)}},loadContentData:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark(function o(){var r,l,d,c,v,h,f;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n.loading=!0,n.error=null,o.prev=1,"movie"===t?d="/getV2/movie/".concat(e):"episode"!==t&&"series"!==t||(d="/getV2/episode/".concat(e)),o.next=2,n.$axios.get(d);case 2:c=o.sent,v=c.data,h=null,h=null!=v&&null!==(r=v.data)&&void 0!==r&&r.episode?m(m({},v.data.episode),{},{cdn:v.data.cdn}):null!=v&&null!==(l=v.data)&&void 0!==l&&l.movie?m(m({},v.data.movie),{},{cdn:v.data.cdn}):null!=v&&v.data?v.data:v,n.addToCart(h),o.next=4;break;case 3:o.prev=3,f=o.catch(1),n.error="خطا در بارگذاری اطلاعات محتوا",console.error("Error loading content data:",f);case 4:return o.prev=4,n.showAddMoreDropdown=!1,n.loading=!1,o.finish(4);case 5:case"end":return o.stop()}},o,null,[[1,3,4,5]])}))()},loadAvailableItems:function(){this.season&&"object"===Object(l.a)(this.season)?this.availableItems=Object.values(this.season).flat():this.availableItems=[]},getContentTitle:function(t){if(t){var e=t.name||t.title,n=t.name_fa||t.title_fa,title=this.chooseLang(e,n);if(title)return title}return this.chooseLang(this.name,this.namefa)},getContentTitleHeader:function(){var t,e,n;return"series"===(null===(t=this.addedItems[0])||void 0===t?void 0:t.type)?"خرید سریال ":"episode"===(null===(e=this.addedItems[0])||void 0===e?void 0:e.type)?"خرید قسمت ":"movie"===(null===(n=this.addedItems[0])||void 0===n?void 0:n.type)?"خرید فیلم ":void 0},formatPrice:function(t){if(!t)return"0";var e=String(t),n=e.length;return 4===n?e.substring(0,1)+"."+e.substring(1):5===n?e.substring(0,2)+"."+e.substring(2):3===n?e:e.substring(0,3)+"."+e.substring(3)},removeItem:function(){this.hideModal()},addItem:function(t){this.loadContentData(t.type,t.id),this.showAddMoreDropdown=!0},removeAddedItem:function(t){this.addedItems.length<=1?this.hideModal():this.removeFromCart(t)},convertDigitsToPersian:function(t){if(!t)return"";var e=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return t.replace(/\d/g,function(t){return e[Number(t)]})},convertDigitsToEnglish:function(t){if(!t)return"";var e={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};return t.replace(/[۰-۹]/g,function(t){return e[t]||t})},validateMobile:function(){var t=(this.mobile||"").replace(/\s+/g,"");this.mobile=t,t?/^09[0-9]{9}$/.test(t)?this.mobileError="":this.mobileError="شماره موبایل معتبر نیست":this.mobileError="شماره موبایل الزامی است"},ensureGuestMobile:function(){var t=this;return 3!==this.userState||(this.validateMobile(),!this.mobileError||(this.$nextTick(function(){var e;null===(e=t.$refs.mobileInput)||void 0===e||e.focus()}),!1))},handlePurchase:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,o,r,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ensureGuestMobile()){e.next=1;break}return e.abrupt("return");case 1:if(t.canPurchase){e.next=2;break}return e.abrupt("return");case 2:if("directdebit"!==t.paymentMethod){e.next=3;break}return t.hideModal(),t.$store.dispatch("directdebit/SHOW_MODAL",{premobile:null,forsubscription:!1,id:null,type:null,paymentid:0}),e.abrupt("return");case 3:return t.processing=!0,e.prev=4,n={},n=t.userLogin?{method:t.paymentMethod,cart:[],ekran:0,callback_url:"https://upera.tv/callback",ref:0,sms:!1,mobile:t.mobile}:{method:t.paymentMethod,cart:[],ekran:0,callback_url:"https://upera.tv/callback",ref:0,sms:!1},t.addedItems.length>0&&(n.cart=t.addedItems.map(function(t){return"movie"===t.type?{movie_id:t.id}:{episode_id:t.id}})),3===t.userState&&(n.mobile=t.mobile),o=t.userLogin?"/get/buy":"/ghost/get/buy",e.next=5,t.$axios.post(o,n);case 5:(r=e.sent).data.data.pay_url?window.location.href=r.data.data.pay_url:t.error="خطا در ایجاد لینک پرداخت",e.next=8;break;case 6:if(e.prev=6,!((l=e.catch(4)).response&&l.response.data&&l.response.data.message)){e.next=7;break}return t.error=l.response.data.message,e.abrupt("return");case 7:t.error="خطا در انجام عملیات پرداخت";case 8:return e.prev=8,t.processing=!1,e.finish(8);case 9:case"end":return e.stop()}},e,null,[[4,6,8,9]])}))()},cleanup:function(){this.error=null,this.mobile=null,this.mobileError="",this.useWallet=!1,this.showAddMoreDropdown=!1,this.availableItems=[]},chooseLang:function(t,e){return e&&"fa"==this.$i18n.locale?e:t},showModal:function(){var t;this.isMobile&&!this.staticmodal?(this.isDrawerVisible=!0,document.body.style.overflow="hidden"):null===(t=this.$refs.downloadLinks)||void 0===t||t.show()},hideModal:function(){var t;this.isMobile&&!this.staticmodal?(this.isDrawerVisible=!1,document.body.style.overflow=""):null===(t=this.$refs.downloadLinks)||void 0===t||t.hide();this.$emit("hide-modal",null),this.cleanup()},posterSrc:function(t){if(!t)return"";var e=142,n=212;return"".concat("https://thumb.upera.shop/thumb","?w=").concat(e,"&h=").concat(n,"&q=100&a=c&src=").concat("https://cdn.upera.shop/s3/posters","/").concat(t)},redirectToItem:function(){this.hideModal(),this.$router.push("episode"===this.type?{name:"episode-id",params:{id:this.$route.params.id}}:"movie"===this.type?{name:"movie-id",params:{id:this.$route.params.id}}:{name:"series-id",params:{id:this.$route.params.id}})}}},f=(n(781),n(28)),component=Object(f.a)(h,function(){var t=this,e=t._self._c;return e("div",[e("client-only",[t.isMobile&&!t.staticmodal?e("transition",{attrs:{name:"download-drawer-slide"}},[t.isDrawerVisible?e("div",{staticClass:"download-drawer-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.hideModal.apply(null,arguments)}}},[e("div",{staticClass:"download-drawer"},[e("div",{staticClass:"download-drawer-header"},[e("button",{staticClass:"close-button",on:{click:t.hideModal}},[e("i",{staticClass:"fa fa-times"})])]),t._v(" "),e("div",{staticClass:"download-drawer-content"},[t._t("default")],2)])]):t._e()]):t._e()],1),t._v(" "),!t.isMobile||t.staticmodal?e("b-modal",{ref:"downloadLinks",attrs:{id:"downloadLinks",centered:!t.staticmodal,"hide-footer":"","hide-header":"",size:"lg","no-close-on-backdrop":t.staticmodal,"hide-backdrop":t.staticmodal,"no-close-on-esc":t.staticmodal,"modal-class":"modal-download-link",static:t.staticmodal,"no-enforce-focus":""}},[e("div",{staticClass:"download-links"},[e("div",{staticClass:"top-section"},[e("div",{staticClass:"download-links-header-simple"},[e("div",{staticClass:"download-links-title-simple"},[t._v("\n            "+t._s(t.getContentTitleHeader())+"\n          ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.staticmodal,expression:"!staticmodal"}],staticClass:"close",attrs:{type:"button"},on:{click:t.hideModal}},[e("i",{staticClass:"fas fa-times",style:{color:"dark"===t.$colorMode.value?"white":"black"}})])]),t._v(" "),e("div",{staticClass:"download-links-body-simple"},[t.loading?e("div",{staticClass:"loading-state"},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])]),t._v(" "),e("p",[t._v("در حال بارگذاری...")])]):t.error?e("div",{staticClass:"error-state"},[e("p",{staticClass:"text-danger"},[t._v(t._s(t.error))]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.loadContentData(t.type,t.id)}}},[t._v("\n              تلاش مجدد\n            ")])]):e("div",{staticClass:"tvod-content"},[e("div",{staticClass:"content-card"},[t.addedItems.length>0?e("div",{staticClass:"added-items-list"},t._l(t.addedItems,function(n){return e("div",{key:n.id,staticClass:"added-item-card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"card-image"},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":t.posterSrc(n.poster),alt:"Poster"}})]),t._v(" "),e("div",{staticClass:"card-details"},[e("div",{staticClass:"content-name"},[t._v("\n                        "+t._s(t.getContentTitle(n))+"\n                      ")]),t._v(" "),e("div",{staticClass:"content-info"},[n.season_number&&n.episode_number?e("span",[t._v("\n                          فصل "+t._s(n.season_number)+" - قسمت\n                          "+t._s(n.episode_number)+"\n                        ")]):t._e()]),t._v(" "),e("div",{staticClass:"content-price"},[t._v("\n                        "+t._s(t.formatPrice(n.tvod_price))+"\n                        "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]),t._v(" "),e("div",{staticClass:"card-actions"},[e("button",{staticClass:"btn-delete",on:{click:function(e){return t.removeAddedItem(n.id)}}},[e("i",{staticClass:"fas fa-trash-alt",staticStyle:{color:"#ff6633","font-size":"1.5rem"}})])])])])}),0):t._e()]),t._v(" "),t.showAddMoreButton?e("div",{staticClass:"add-more-section"},[e("button",{staticClass:"btn-add-more",on:{click:function(e){return t.redirectToItem()}}},[e("i",{staticClass:"fas fa-plus"}),t._v("اضافه کردن قسمت های دیگر\n              ")])]):t._e(),t._v(" "),t.showPaymentMethods?e("div",{staticClass:"payment-section"},[e("div",{staticClass:"section-title"},[t._v("انتخاب روش پرداخت")]),t._v(" "),e("div",{staticClass:"payment-options"},t._l(t.paymentMethods,function(o){return e("div",{key:o.value,staticClass:"payment-option",class:{disabled:t.useWalletCredit}},[e("div",{staticClass:"payment-option-content"},[e("div",{staticClass:"payment-image"},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":n(454)("./".concat(o.src))}})]),t._v(" "),e("div",{staticClass:"payment-info"},[e("div",{staticClass:"payment-name"},[t._v(t._s(o.name))])]),t._v(" "),e("div",{staticClass:"payment-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentMethod,expression:"paymentMethod"}],attrs:{id:"payment-".concat(o.value),type:"radio",name:"payment",disabled:t.useWalletCredit},domProps:{value:o.value,checked:t._q(t.paymentMethod,o.value)},on:{change:function(e){t.paymentMethod=o.value}}})])])])}),0)]):t._e(),t._v(" "),t.showWalletSection?e("div",{staticClass:"wallet-section"},[e("div",{staticClass:"d-flex justify-content-start align-content-center"},[e("i",{staticClass:"fas fa-wallet fa-2x",staticStyle:{color:"#525252",padding:"1rem"}}),t._v(" "),e("div",{staticClass:"wallet-option"},[e("label",{staticClass:"text-sm mb-0",staticStyle:{"font-weight":"600"},attrs:{for:"use-wallet"}},[t._v("کیف پول")]),t._v(" "),e("div",{staticClass:"wallet-balance"},[e("span",[t._v("موجودی :")]),t._v(" "),e("span",{staticClass:"balance-amount"},[t._v("\n                      "+t._s(t.my_credit)+"\n                    ")])])])]),t._v(" "),e("div",{staticClass:"custom-control custom-switch ml-2 mb-2",attrs:{dir:"rtl"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.useWalletCredit,expression:"useWalletCredit"}],staticClass:"custom-control-input",attrs:{id:"use-wallet",type:"checkbox",disabled:!t.hasEnoughWalletBalance},domProps:{checked:Array.isArray(t.useWalletCredit)?t._i(t.useWalletCredit,null)>-1:t.useWalletCredit},on:{change:function(e){var n=t.useWalletCredit,o=e.target,r=!!o.checked;if(Array.isArray(n)){var l=t._i(n,null);o.checked?l<0&&(t.useWalletCredit=n.concat([null])):l>-1&&(t.useWalletCredit=n.slice(0,l).concat(n.slice(l+1)))}else t.useWalletCredit=r}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"use-wallet"}})])]):t._e(),t._v(" "),t.showMobileInput?e("div",{staticClass:"mobile-section"},[e("div",{staticClass:"mobile-input-container"},[e("label",{attrs:{for:"mobile-input"}},[t._v("شماره موبایل")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileDisplay,expression:"mobileDisplay"}],ref:"mobileInput",staticClass:"form-control",attrs:{id:"mobile-input",type:"tel",placeholder:"شماره موبایل خود را وارد کنید",dir:"rtl"},domProps:{value:t.mobileDisplay},on:{input:[function(e){e.target.composing||(t.mobileDisplay=e.target.value)},t.validateMobile]}}),t._v(" "),e("div",{staticClass:"input-note"},[t._v("\n                  برای خرید شماره تلفن خودرا وارد کنید\n                ")]),t._v(" "),t.mobileError?e("div",{staticClass:"error-message"},[t._v("\n                  "+t._s(t.mobileError)+"\n                ")]):t._e()])]):t._e(),t._v(" "),e("div",{staticClass:"price-summary"},[e("div",{staticClass:"price-row"},[e("span",[t._v("جمع")]),t._v(" "),e("span",{staticClass:"amount-value"},[t._v(t._s(t.formatPrice(t.subtotalAmount))+"\n                  "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]),t._v(" "),t.taxAmount>0?e("div",{staticClass:"price-row"},[e("span",[t._v("ارزش افزوده (۱۰٪)")]),t._v(" "),e("span",{staticClass:"amount-value"},[t._v(t._s(t.formatPrice(t.taxAmount))+"\n                  "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]):t._e()])])])]),t._v(" "),t.loading||t.error?t._e():e("div",{staticClass:"download-links-footer-simple"},[e("div",{staticClass:"footer-content"},[e("div",{staticClass:"payable-amount"},[e("span",{staticClass:"amount-label"},[t._v("مبلغ قابل پرداخت:")]),t._v(" "),e("span",{staticClass:"amount-value"},[t._v("\n              "+t._s(t.formatPrice(t.totalAmount))+"\n              "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-payment",attrs:{disabled:!t.canPurchase||t.processing},on:{click:t.handlePurchase}},[t.processing?e("span",{staticClass:"spinner-border spinner-border-sm"}):e("span",[t._v("پرداخت")])])])])])]):t._e(),t._v(" "),e("client-only",[t.isMobile&&!t.staticmodal?e("transition",{attrs:{name:"download-drawer-slide"}},[t.isDrawerVisible?e("div",{staticClass:"download-drawer-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.hideModal.apply(null,arguments)}}},[e("div",{staticClass:"download-drawer"},[e("div",{staticClass:"download-drawer-header"},[e("button",{staticClass:"close-button",on:{click:t.hideModal}},[e("i",{staticClass:"fa fa-times"})])]),t._v(" "),e("div",{staticClass:"download-drawer-content"},[e("div",{staticClass:"download-links"},[e("div",{staticClass:"top-section"},[e("div",{staticClass:"download-links-header-simple"},[e("div",{staticClass:"download-links-title-simple"},[t._v("\n                    "+t._s(t.getContentTitleHeader())+"\n                  ")])]),t._v(" "),e("div",{staticClass:"download-links-body-simple"},[t.loading?e("div",{staticClass:"loading-state"},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])]),t._v(" "),e("p",[t._v("در حال بارگذاری...")])]):t.error?e("div",{staticClass:"error-state"},[e("p",{staticClass:"text-danger"},[t._v(t._s(t.error))]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.loadContentData(t.type,t.id)}}},[t._v("\n                      تلاش مجدد\n                    ")])]):e("div",{staticClass:"tvod-content"},[e("div",{staticClass:"content-card"},[t.addedItems.length>0?e("div",{staticClass:"added-items-list"},t._l(t.addedItems,function(n){return e("div",{key:n.id,staticClass:"added-item-card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"card-image"},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":t.posterSrc(n.poster),alt:"Poster"}})]),t._v(" "),e("div",{staticClass:"card-details"},[e("div",{staticClass:"content-name"},[t._v("\n                                "+t._s(t.getContentTitle(n))+"\n                              ")]),t._v(" "),e("div",{staticClass:"content-info"},[n.season_number&&n.episode_number?e("span",[t._v("\n                                  فصل "+t._s(n.season_number)+" - قسمت\n                                  "+t._s(n.episode_number)+"\n                                ")]):t._e()]),t._v(" "),e("div",{staticClass:"content-price"},[t._v("\n                                "+t._s(t.formatPrice(n.tvod_price))+"\n                                "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]),t._v(" "),e("div",{staticClass:"card-actions"},[e("button",{staticClass:"btn-delete",on:{click:function(e){return t.removeAddedItem(n.id)}}},[e("i",{staticClass:"fas fa-trash-alt",staticStyle:{color:"#ff6633","font-size":"1.5rem"}})])])])])}),0):t._e()]),t._v(" "),t.showAddMoreButton?e("div",{staticClass:"add-more-section"},[e("button",{staticClass:"btn-add-more",on:{click:function(e){return t.redirectToItem()}}},[e("i",{staticClass:"fas fa-plus"}),t._v("اضافه کردن قسمت های دیگر\n                      ")])]):t._e(),t._v(" "),t.showPaymentMethods?e("div",{staticClass:"payment-section"},[e("div",{staticClass:"section-title"},[t._v("انتخاب روش پرداخت")]),t._v(" "),e("div",{staticClass:"payment-options"},t._l(t.paymentMethods,function(o){return e("div",{key:o.value,staticClass:"payment-option",class:{disabled:t.useWalletCredit}},[e("div",{staticClass:"payment-option-content"},[e("div",{staticClass:"payment-image"},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":n(454)("./".concat(o.src))}})]),t._v(" "),e("div",{staticClass:"payment-info"},[e("div",{staticClass:"payment-name"},[t._v("\n                                "+t._s(o.name)+"\n                              ")])]),t._v(" "),e("div",{staticClass:"payment-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentMethod,expression:"paymentMethod"}],attrs:{id:"payment-mobile-".concat(o.value),type:"radio",name:"payment",disabled:t.useWalletCredit},domProps:{value:o.value,checked:t._q(t.paymentMethod,o.value)},on:{change:function(e){t.paymentMethod=o.value}}})])])])}),0)]):t._e(),t._v(" "),t.showWalletSection?e("div",{staticClass:"wallet-section"},[e("div",{staticClass:"d-flex justify-content-start align-content-center"},[e("i",{staticClass:"fas fa-wallet fa-2x",staticStyle:{color:"#525252",padding:"1rem"}}),t._v(" "),e("div",{staticClass:"wallet-option"},[e("label",{staticClass:"text-sm mb-0",staticStyle:{"font-weight":"600"},attrs:{for:"use-wallet-mobile"}},[t._v("کیف پول")]),t._v(" "),e("div",{staticClass:"wallet-balance"},[e("span",[t._v("موجودی :")]),t._v(" "),e("span",{staticClass:"balance-amount"},[t._v("\n                              "+t._s(t.my_credit)+"\n                            ")])])])]),t._v(" "),e("div",{staticClass:"custom-control custom-switch ml-2 mb-2",attrs:{dir:"rtl"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.useWalletCredit,expression:"useWalletCredit"}],staticClass:"custom-control-input",attrs:{id:"use-wallet-mobile",type:"checkbox",disabled:!t.hasEnoughWalletBalance},domProps:{checked:Array.isArray(t.useWalletCredit)?t._i(t.useWalletCredit,null)>-1:t.useWalletCredit},on:{change:function(e){var n=t.useWalletCredit,o=e.target,r=!!o.checked;if(Array.isArray(n)){var l=t._i(n,null);o.checked?l<0&&(t.useWalletCredit=n.concat([null])):l>-1&&(t.useWalletCredit=n.slice(0,l).concat(n.slice(l+1)))}else t.useWalletCredit=r}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"use-wallet-mobile"}})])]):t._e(),t._v(" "),t.showMobileInput?e("div",{staticClass:"mobile-section"},[e("div",{staticClass:"mobile-input-container"},[e("label",{attrs:{for:"mobile-input-drawer"}},[t._v("شماره موبایل")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileDisplay,expression:"mobileDisplay"}],ref:"mobileInputDrawer",staticClass:"form-control",attrs:{id:"mobile-input-drawer",type:"tel",placeholder:"شماره موبایل خود را وارد کنید",dir:"rtl"},domProps:{value:t.mobileDisplay},on:{input:[function(e){e.target.composing||(t.mobileDisplay=e.target.value)},t.validateMobile]}}),t._v(" "),e("div",{staticClass:"input-note"},[t._v("\n                          برای خرید شماره تلفن خودرا وارد کنید\n                        ")]),t._v(" "),t.mobileError?e("div",{staticClass:"error-message"},[t._v("\n                          "+t._s(t.mobileError)+"\n                        ")]):t._e()])]):t._e(),t._v(" "),e("div",{staticClass:"price-summary"},[e("div",{staticClass:"price-row"},[e("span",[t._v("جمع")]),t._v(" "),e("span",{staticClass:"amount-value"},[t._v(t._s(t.formatPrice(t.subtotalAmount))+"\n                          "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]),t._v(" "),t.taxAmount>0?e("div",{staticClass:"price-row"},[e("span",[t._v("ارزش افزوده (۱۰٪)")]),t._v(" "),e("span",{staticClass:"amount-value"},[t._v(t._s(t.formatPrice(t.taxAmount))+"\n                          "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]):t._e()])])])]),t._v(" "),t.loading||t.error?t._e():e("div",{staticClass:"download-links-footer-simple"},[e("div",{staticClass:"footer-content"},[e("div",{staticClass:"payable-amount"},[e("span",{staticClass:"amount-label"},[t._v("مبلغ قابل پرداخت:")]),t._v(" "),e("span",{staticClass:"amount-value"},[t._v("\n                      "+t._s(t.formatPrice(t.totalAmount))+"\n                      "),e("span",{staticClass:"toman-title"},[t._v("تومان")])])]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-payment",attrs:{disabled:!t.canPurchase||t.processing},on:{click:t.handlePurchase}},[t.processing?e("span",{staticClass:"spinner-border spinner-border-sm"}):e("span",[t._v("پرداخت")])])])])])])])]):t._e()]):t._e()],1)],1)},[],!1,null,"01a5229d",null);e.default=component.exports},778:function(t,e,n){"use strict";var o=n(25),r=n(779),l=n(81),d=n(105),c=n(137),v=n(244);o({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=l(this),n=d(e),o=v(e,0);return o.length=r(o,e,e,n,0,void 0===t?1:c(t)),o}})},779:function(t,e,n){"use strict";var o=n(169),r=n(105),l=n(310),d=n(77),c=function(t,e,source,n,v,m,h,f){for(var element,_,C=v,y=0,w=!!h&&d(h,f);y<n;)y in source&&(element=w?w(source[y],y,e):source[y],m>0&&o(element)?(_=r(element),C=c(t,e,element,_,C,m-1)-1):(l(C+1),t[C]=element),C++),y++;return C};t.exports=c},780:function(t,e,n){"use strict";n(167)("flat")},781:function(t,e,n){"use strict";n(735)}}]);