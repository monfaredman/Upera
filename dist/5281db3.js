(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{1006:function(t,e,o){var content=o(1111);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(57).default)("26fdfb68",content,!0,{sourceMap:!1})},1110:function(t,e,o){"use strict";o(1006)},1111:function(t,e,o){var n=o(56)(function(i){return i[1]});n.push([t.i,"[data-v-03d981f4] .full-screen-player.vjs-fluid{overflow:hidden!important}.hamshahri[data-v-03d981f4]{background-color:transparent!important;background-color:initial!important}.back-button[data-v-03d981f4]{background:rgba(0,0,0,.6);border:none;border-radius:8px;color:#fff;cursor:pointer;font-size:18px;left:20px;padding:10px 20px;position:absolute;top:20px;z-index:10}.back-button[data-v-03d981f4]:hover{background:rgba(0,0,0,.8)}.loading[data-v-03d981f4]{align-items:center;color:#fff;display:flex;flex-direction:column;font-size:20px;font-weight:700;justify-content:center}.loading svg[data-v-03d981f4]{animation:spin 1s linear infinite;height:50px;margin-top:10px;width:50px}.soon[data-v-03d981f4]{color:#fff;font-size:22px;font-weight:700;margin-top:20px;text-align:center}.refresh-btn[data-v-03d981f4]{cursor:pointer;font-size:16px;margin-top:10px}",""]),n.locals={},t.exports=n},1178:function(t,e,o){"use strict";o.r(e);var n=o(23),r=(o(60),o(34),o(11),{components:{VideoPlayer:o(764).default},layout:"empty",data:function(){return{movieTitle:"",posterUrl:"",videoUrl:"",loading:!0,soon:!1,intervalId:null}},watch:{"$route.params.live":{immediate:!0,handler:function(){this.loadVideo()}}},methods:{loadVideo:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var o,n,r,l,data,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("loadVideo() is called!"),e.prev=1,o=t.$route.params.live){e.next=2;break}return console.log("No ID found in route params"),e.abrupt("return");case 2:return console.log("ID:",o),n=t.$cookiz.get("ref")||"",r="/ghost/get/watch/live/".concat(o).concat(n?"?ref=".concat(n):""),console.log("API URL:",r),e.next=3,t.$axios.get(r);case 3:if(200!==(l=e.sent).status){e.next=5;break}return data=l.data.data,t.movieTitle=data.title||"پخش زنده",t.posterUrl=data.poster||"",c=data.video.video,console.log("Stream URL from API:",c),e.next=4,fetch(c,{method:"HEAD"});case 4:e.sent.ok?(t.videoUrl=c,t.soon=!1):t.soon=!0,e.next=6;break;case 5:t.soon=!0;case 6:t.loading=!1,e.next=8;break;case 7:e.prev=7,d=e.catch(1),console.error("API Error:",d),t.loading=!1,t.soon=!0;case 8:case"end":return e.stop()}},e,null,[[1,7]])}))()},reloadPage:function(){location.reload()},goBack:function(){window.history.length>2?this.$router.go(-1):this.$router.push({name:"index"})}}}),l=(o(1110),o(28)),component=Object(l.a)(r,function(){var t=this,e=t._self._c;return e("div",{staticClass:"video-container"},[e("div",{staticClass:"hamshahri"},[e("a",{staticClass:"srmjs",on:{click:t.goBack}},[t._m(0)]),t._v(" "),t.loading?e("div",{staticClass:"video-loading-spinner"}):t._e(),t._v(" "),t.soon?e("p",{staticClass:"soon"},[t._v("به زودی...")]):t._e(),t._v(" "),t.soon?e("button",{staticClass:"btn btn-primary btn-lg fw-bold refresh-btn",on:{click:t.reloadPage}},[t._v("\n      بارگذاری مجدد\n    ")]):t._e()]),t._v(" "),e("div",{staticClass:"player-wrapper"},[t.videoUrl&&!t.soon?e("VideoPlayer",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],ref:"live",staticClass:"full-screen-player vjs-fluid",attrs:{playerid:"live",stream:t.videoUrl,title:t.movieTitle,"data-poster":t.posterUrl,"player-auto-play":!0,"show-auto-play-toggle":!1}}):t._e()],1)])},[function(){var t=this._self._c;return t("div",{attrs:{id:"flowplayer-back-button"}},[t("div",{staticClass:"icon-back"})])}],!1,null,"03d981f4",null);e.default=component.exports;installComponents(component,{VideoPlayer:o(764).default})}}]);