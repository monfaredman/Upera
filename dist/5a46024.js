(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1090:function(e,t,o){"use strict";o(996)},1091:function(e,t,o){var r=o(56)(function(i){return i[1]});r.push([e.i,".site-logo img[data-v-710360e8]{opacity:.3!important}[data-v-710360e8] .full-screen-player.vjs-fluid{overflow:hidden!important}.episode-player-page[data-v-710360e8]{height:100%;position:relative;width:100%}.report-modal[data-v-710360e8]{align-items:center;background:rgba(0,0,0,.7);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.modal-container[data-v-710360e8]{background:#fff;border-radius:8px;max-width:600px;padding:1rem;width:90%}.header[data-v-710360e8]{text-align:right}.sm-exit-svg[data-v-710360e8]{cursor:pointer;width:24px}.hamshahri[data-v-710360e8]{align-items:flex-start;display:flex;justify-content:space-between;left:0;padding:16px;position:absolute;right:0;top:0;z-index:10}.site-logo[data-v-710360e8]{position:absolute;right:16px;top:16px;z-index:11}.site-logo img[data-v-710360e8]{height:40px;width:auto}.back-button[data-v-710360e8]{align-items:center;background:#525252;border:none;border-radius:8px;cursor:pointer;display:flex;gap:8px;height:40px;justify-content:center;padding:12px 28px;transition:background .3s;width:131px}.back-button[data-v-710360e8]:hover{background:#6a6a6a}.back-text[data-v-710360e8]{color:#f5f5f5;font-size:16px;font-weight:600;height:3rem;line-height:3.1rem;margin:0 0 0 8px;text-align:right}#flowplayer-back-button[data-v-710360e8]{cursor:pointer}.soon[data-v-710360e8],.video-loading-spinner[data-v-710360e8]{margin-left:10px}.soon[data-v-710360e8]{color:#fff;font-size:20px}.refresh-btn[data-v-710360e8]{margin-left:10px}.player-wrapper[data-v-710360e8]{height:100%}.playlist-container[data-v-710360e8]{background:rgba(0,0,0,.8);bottom:0;color:#fff;left:0;padding:10px;position:absolute;right:0}.season-list[data-v-710360e8]{display:flex;justify-content:center;margin-bottom:10px}.season-toggle-btn[data-v-710360e8]{background:#444;border:none;color:#fff;cursor:pointer;margin:0 5px;padding:5px 10px}.season-toggle-btn.active[data-v-710360e8]{background:#888}.episode-list a[data-v-710360e8]{border-bottom:1px solid #555;color:#fff;display:block;padding:5px;-webkit-text-decoration:none;text-decoration:none}.episode-list a[data-v-710360e8]:hover{background:#333}.next-episode-overlay[data-v-710360e8]{background:rgba(0,0,0,.7);border-radius:8px;bottom:80px;cursor:pointer;padding:10px;position:absolute;right:20px;z-index:600}.next-episode-content p[data-v-710360e8]{color:#fff;margin:0 0 5px}.next-episode-content img[data-v-710360e8]{border-radius:4px;width:100%}.playlist-menu[data-v-710360e8]{margin-top:20px;position:relative;text-align:center}.playlist-toggle-btn[data-v-710360e8]{background-color:#007bff;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;padding:10px 20px;transition:background-color .3s}.playlist-toggle-btn[data-v-710360e8]:hover{background-color:#0056b3}.playlist-modal[data-v-710360e8]{align-items:center;background:rgba(0,0,0,.6);display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:1000}.playlist-modal-content[data-v-710360e8]{background:#f5f5f5;border-radius:16px;display:flex;flex-direction:column;height:370px;opacity:1;overflow:hidden;padding:12px;width:556px}.playlist-modal-header[data-v-710360e8]{align-items:center;display:flex;justify-content:space-between;padding:0 4px 12px}.modal-title[data-v-710360e8]{color:#000;font-size:18px;font-weight:700;text-align:right}.close-btn[data-v-710360e8]{align-items:center;background:none;border:none;color:#000;cursor:pointer;display:flex;font-size:24px;justify-content:center;line-height:1;padding:0}.close-btn svg[data-v-710360e8]{height:24px;width:24px}.divider[data-v-710360e8]{background:#000;height:1px;margin-bottom:16px;margin-left:0!important;margin-right:0!important;width:100%}.season-selector[data-v-710360e8]{margin-bottom:16px;padding:0 4px}.season-label[data-v-710360e8]{display:block;margin-bottom:8px}.season-dropdown[data-v-710360e8],.season-label[data-v-710360e8]{color:#000;font-size:14px;font-weight:500;text-align:right}.season-dropdown[data-v-710360e8]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:#fff;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' fill='none' viewBox='0 0 12 8'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m1 1.5 5 5 5-5'/%3E%3C/svg%3E\");background-position:left 16px center;background-repeat:no-repeat;border:1px solid #d4d4d4;border-radius:12px;cursor:pointer;direction:rtl;height:44px;outline:none;padding:10px 16px;width:100%}.season-dropdown[data-v-710360e8]:focus{border-color:#000}.episode-list[data-v-710360e8]{display:flex;flex:1;flex-direction:column;gap:8px;overflow-y:auto;padding:0 4px}.episode-card[data-v-710360e8]{align-items:center;background:#fff;border-radius:12px;cursor:pointer;display:flex;flex-direction:row;flex-direction:row-reverse;gap:8px;height:75px;opacity:1;padding:12px;transition:transform .2s,box-shadow .2s;width:100%}.episode-card[data-v-710360e8]:hover{box-shadow:0 4px 8px rgba(0,0,0,.1);transform:translateY(-2px)}.episode-image[data-v-710360e8]{border-radius:4px;flex-shrink:0;height:51px;-o-object-fit:cover;object-fit:cover;opacity:1;width:89px}.episode-info[data-v-710360e8]{display:flex;flex:1;flex-direction:column;gap:4px;justify-content:flex-start;overflow:hidden}.episode-title[data-v-710360e8]{color:#000;font-size:14px;font-style:normal;font-weight:500;letter-spacing:0;line-height:24px;overflow:hidden;text-align:right;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.episode-meta[data-v-710360e8]{align-items:center;color:#666;display:flex;flex-direction:row;font-size:12px;font-weight:400;gap:4px;text-align:right}.episode-meta .separator[data-v-710360e8]{margin:0 4px}.episode-list[data-v-710360e8]::-webkit-scrollbar{width:6px}.episode-list[data-v-710360e8]::-webkit-scrollbar-track{background:transparent}.episode-list[data-v-710360e8]::-webkit-scrollbar-thumb{background:#d4d4d4;border-radius:3px}.episode-list[data-v-710360e8]::-webkit-scrollbar-thumb:hover{background:#b0b0b0}@media (max-width:768px){.playlist-modal[data-v-710360e8]{align-items:flex-end}.playlist-modal-content[data-v-710360e8]{animation:slideUp-710360e8 .3s ease-out;border-radius:16px 16px 0 0;height:auto;max-height:70vh;max-width:100%;width:100%}@keyframes slideUp-710360e8{0%{transform:translateY(100%)}to{transform:translateY(0)}}.episode-card[data-v-710360e8]{width:100%}.episode-image[data-v-710360e8]{height:40px;width:70px}[data-v-710360e8] .vjs-split-controls .vjs-control-bar{gap:0!important}[data-v-710360e8] .vjs-split-controls .vjs-next-button{margin-left:0!important}[data-v-710360e8] .video-js .vjs-control{width:3em!important}[data-v-710360e8] .vjs-progress-control.vjs-control{width:100vw!important}}@media (max-width:480px){.modal-title[data-v-710360e8]{font-size:16px}.episode-title[data-v-710360e8]{font-size:12px;line-height:20px}.episode-meta[data-v-710360e8]{font-size:10px}}.video-loading-spinner[data-v-710360e8]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}",""]),r.locals={},e.exports=r},1165:function(e,t,o){"use strict";o.r(t);o(13),o(44),o(11);var r=o(23),n=(o(60),o(69),o(40),o(18),o(61),o(96),{components:{VideoPlayer:o(764).default},beforeRouteLeave:function(e,t,o){if(this.$swal&&this.$swal.close)try{this.$swal.close()}catch(e){}o()},layout:"empty",data:function(){return{episodeTitle:"",posterUrl:"",videoUrl:"",vastUrl:"",creditsData:{},tracks:[],loading:!0,soon:!1,guest:!0,series_id:0,show_report:!1,report_problem_type:null,report_details:"",report_button:!1,reportOptions:[{value:1,label:"report.labeling_problem"},{value:2,label:"report.video_problem"},{value:3,label:"report.sound_problem"},{value:4,label:"report.caption_problem"}],suggestion:null,suggestionBackdrop:"",showNextEpisode:!1,recentlyTime:200,showPlaylistMenu:!1,season:null,seasonList:[],seasonOpened:null,startTime:0,fullrateData:null}},computed:{currentEpisodeList:function(){return this.season&&this.season[this.seasonOpened]?this.season[this.seasonOpened]:[]}},watch:{showPlaylistMenu:function(e){document.body.style.overflow=e?"hidden":""}},mounted:function(){this.$auth&&this.$auth.loggedIn&&(this.guest=!1),this.loadEpisode(),window.addEventListener("popstate",this.handlePopState)},beforeDestroy:function(){if(this.$swal&&this.$swal.close)try{this.$swal.close()}catch(e){}window.removeEventListener("popstate",this.handlePopState)},methods:{handlePopState:function(){if(this.$swal&&this.$swal.close)try{this.$swal.close()}catch(e){}},showErrorAlert:function(data){var e=this,t="fa"===this.$i18n.locale?data.message_fa:data.message;t||(t=this.$t("player.error1"));var o={back:{text:this.$t("player.back"),value:"back",closeModal:!0,className:"swal-back"}};1===data.show_download&&(o.download={text:this.$t("player.download"),value:"download",closeModal:!0}),1===data.show_ekran&&(o.download={text:this.$t("show.buy_ticket"),value:"download",closeModal:!0}),1===data.show_subscription&&(o.subscribe={text:this.$t("player.subscribe"),value:"subscribe",closeModal:!0}),this.$auth.loggedIn||1!==data.show_login||Object.assign(o,{login:{text:this.$t("nav.login"),value:"login",closeModal:!0}}),this.$swal({title:t,icon:"error",dangerMode:!0,buttons:o}).then(function(t){switch(t){case"back":default:window.history.length>2?e.$router.go(-1):e.$router.push({name:"episode-id",params:{id:e.$route.params.id}});break;case"subscribe":e.$store.dispatch("subscription/SHOW_MODAL",{content_type:"episode",content_id:e.$route.params.id});break;case"download":e.$router.push({name:"episode-payment-id",params:{id:e.$route.params.id},query:{force_to_buy:1}});break;case"login":e.$store.dispatch("login/SHOW_MODAL",{premessage:null,premobile:null,preredirect:null,prerefresh:!1})}})},loadEpisode:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var o,r,n,l,data,d,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.$route.params.id){t.next=1;break}return t.abrupt("return");case 1:return r=e.$cookiz.get("ref")||"",n=e.guest?"/ghost/get/watch/series":"/get/watch/series",t.next=2,e.$axios.post(n,{episode_id:o,type:"sp",series_id:"",hls:1,ref:r});case 2:"success"===(l=t.sent).data.status?((data=l.data.data).fullrate_data&&(e.fullrateData=data.fullrate_data),d=data.episode[0],e.episodeTitle="fa"===e.$i18n.locale&&d.name_fa?d.name_fa:d.name,e.posterUrl=data.cdn.lg_backdrop+d.backdrop,e.videoUrl=d.video.includes("?")?d.video+"&nosub=1":d.video+"?nosub=1",e.vastUrl=data.vast,e.startTime=d.current_time||0,e.series_id=d.series_id||0,data.new_subtitle&&Array.isArray(data.new_subtitle)&&(e.tracks=data.new_subtitle.map(function(track,e){return{kind:"captions",label:track.language,src:track.url,default:0===e,language:track.language}})),e.creditsData={first_credits:data.first_credits||null,after_credits:data.after_credits||null,final_credits:data.final_credits||null},data.suggestion&&(e.suggestion=data.suggestion,e.suggestionBackdrop=data.cdn.md_backdrop+data.suggestion.backdrop),data.season&&Object.keys(data.season).length&&(e.season=data.season,e.seasonList=Object.keys(data.season),e.seasonOpened=d.season_number.toString()),e.soon=!1):e.showErrorAlert(l.data.data),t.next=4;break;case 3:t.prev=3,c=t.catch(0),e.showErrorAlert(c.response.data);case 4:return t.prev=4,e.loading=!1,t.finish(4);case 5:case"end":return t.stop()}},t,null,[[0,3,4,5]])}))()},togglePlaylistMenu:function(){this.showPlaylistMenu=!this.showPlaylistMenu},handlePlayerReady:function(e){this.startTime&&e.currentTime&&e.currentTime(this.startTime)},handleTimeUpdate:function(e){var t=e.currentTime,o=e.duration,r=e.player;if(Math.floor(t)>=this.recentlyTime){this.recentlyTime=Math.floor(t)+200;var n={current_time:Math.floor(t),duration_time:Math.floor(o),episode_id:this.$route.params.id,series_id:this.series_id};this.guest?this.$axios.post("/ghost/create/watch/series/recently",n):this.$axios.post("/create/watch/series/recently",n)}return this.creditsData.final_credits&&t>=this.creditsData.final_credits&&this.suggestion||!this.creditsData.final_credits&&o-t<=100&&this.suggestion?this.showNextMovie=!0:this.showNextMovie=!1,r},handleEnded:function(){this.suggestion&&this.playNextEpisode()},playNextEpisode:function(){this.$router.push({name:"episode-show-id",params:{id:this.suggestion.id}})},playEpisode:function(e){this.$router.push({name:"episode-show-id",params:{id:e}})},setSeason:function(e){this.seasonOpened=e},onSeasonChange:function(){},selectEpisode:function(e){this.togglePlaylistMenu(),this.$router.push({name:"episode-show-id",params:{id:e}})},goBack:function(){window.history.length>2?this.$router.go(-1):this.$router.push({name:"episode-id",params:{id:this.$route.params.id}})},handleSubscriptionPurchase:function(){console.log("Subscription purchase triggered from episode player")},reloadPage:function(){location.reload()},openReport:function(){var e;this.show_report=!0;var t=null===(e=this.$refs.episodePlayer)||void 0===e?void 0:e.player;t&&t.pause()},closeReport:function(){var e;this.show_report=!1;var t=null===(e=this.$refs.episodePlayer)||void 0===e?void 0:e.player;t&&t.play(),this.$store.commit("player/CLOSE_REPORT")},sendReport:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.report_button=!0,t.prev=1,o={type:e.report_problem_type,details:e.report_details,id:e.$route.params.id},t.next=2,e.$axios.post("/create/report/episode",o);case 2:"success"===t.sent.data.status&&(e.report_button=!1,e.closeReport(),e.$alertify.logPosition("top right"),e.$alertify.success("Successful Send, our team will check it soon")),t.next=4;break;case 3:t.prev=3,r=t.catch(1),e.report_button=!1,console.error("Report Error:",r);case 4:case"end":return t.stop()}},t,null,[[1,3]])}))()},closePlaylistMenu:function(){this.showPlaylistMenu=!1}}}),l=(o(1090),o(28)),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-container"},[t("div",{staticClass:"hamshahri"},[t("div",{staticClass:"site-logo"},[t("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":o(474),alt:"Logo"}})]),e._v(" "),t("button",{staticClass:"back-button",on:{click:e.goBack}},[t("i",{staticClass:"fa fa-chevron-left",staticStyle:{color:"white"}}),e._v(" "),t("p",{staticClass:"back-text"},[e._v("بازگشت")])]),e._v(" "),e.loading?t("div",{staticClass:"video-loading-spinner"}):e._e(),e._v(" "),e.soon?t("p",{staticClass:"soon"},[e._v("به زودی...")]):e._e(),e._v(" "),e.soon?t("button",{staticClass:"btn btn-primary btn-lg fw-bold refresh-btn",on:{click:e.reloadPage}},[e._v("\n      بارگذاری مجدد\n    ")]):e._e()]),e._v(" "),t("div",{staticClass:"player-wrapper"},[e.videoUrl&&!e.loading?t("VideoPlayer",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],ref:"episodePlayer",staticClass:"full-screen-player vjs-fluid",attrs:{playerid:"episode-player",stream:e.videoUrl,"data-poster":e.posterUrl,title:e.episodeTitle,"vast-url":e.vastUrl||"",tracks:e.tracks,"player-auto-play":!0,"has-playlist":!!(e.seasonList&&e.seasonList.length||e.currentEpisodeList&&e.currentEpisodeList.length),"credits-data":e.creditsData,"fullrate-data":e.fullrateData,"content-id":e.$route.params.id,"content-type":"series"},on:{ready:e.handlePlayerReady,timeupdate:e.handleTimeUpdate,ended:e.handleEnded,playlistButtonClick:e.togglePlaylistMenu,"subscription-purchase":e.handleSubscriptionPurchase}}):e._e()],1),e._v(" "),e.showPlaylistMenu?t("div",{staticClass:"playlist-modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.closePlaylistMenu.apply(null,arguments)}}},[t("div",{staticClass:"playlist-modal-content"},[t("div",{staticClass:"playlist-modal-header"},[t("button",{staticClass:"close-btn",on:{click:e.togglePlaylistMenu}},[t("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]),e._v(" "),t("span",{staticClass:"modal-title"},[e._v("انتخاب فصل و قسمت")])]),e._v(" "),t("div",{staticClass:"divider"}),e._v(" "),t("div",{staticClass:"season-selector"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.seasonOpened,expression:"seasonOpened"}],staticClass:"season-dropdown",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.seasonOpened=t.target.multiple?o:o[0]},e.onSeasonChange]}},e._l(e.seasonList,function(o){return t("option",{key:o,domProps:{value:o}},[e._v("\n            فصل "+e._s(o)+"\n          ")])}),0)]),e._v(" "),t("div",{staticClass:"episode-list"},e._l(e.currentEpisodeList,function(o){return t("div",{key:o.id,staticClass:"episode-card",on:{click:function(t){return e.selectEpisode(o.id)}}},[t("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],staticClass:"episode-image",attrs:{"data-src":o.still_path||e.posterUrl,alt:"قسمت ".concat(o.episode_number)}}),e._v(" "),t("div",{staticClass:"episode-info"},[t("div",{staticClass:"episode-title"},[t("span",[e._v("فصل "+e._s(o.season_number))]),e._v(" "),t("span",{staticClass:"separator"},[e._v("•")]),e._v(" "),t("span",[e._v("قسمت "+e._s(o.episode_number))])])])])}),0)])]):e._e(),e._v(" "),e.showNextEpisode&&e.suggestion?t("div",{staticClass:"next-episode-overlay",on:{click:e.playNextEpisode}},[t("div",{staticClass:"next-episode-content"},[t("p",[e._v(e._s(e.$t("player.play_next_episode"))+": "+e._s(e.suggestion.name_fa))]),e._v(" "),t("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":e.suggestionBackdrop,alt:"Next Episode Backdrop"}})])]):e._e()])},[],!1,null,"710360e8",null);t.default=component.exports;installComponents(component,{VideoPlayer:o(764).default})},996:function(e,t,o){var content=o(1091);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(57).default)("a21ce686",content,!0,{sourceMap:!1})}}]);