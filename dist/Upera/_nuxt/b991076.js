(window.webpackJsonp=window.webpackJsonp||[]).push([[75,81],{739:function(t,n,e){t.exports={}},747:function(t,n,e){"use strict";e(739)},754:function(t,n,e){"use strict";e.r(n);e(142);var a={name:"IconActions",props:{variant:{type:String,default:"desktop"},isWatchlist:{type:[Number,Boolean],default:0},userClaps:{type:[Number,String],default:0},clapActive:{type:Boolean,default:!1},customStyle:{type:Object,default:function(){return{}}}},computed:{isMobile:function(){return"mobile"===this.variant},clapClasses:function(){return this.isMobile?[{active:this.clapActive},"col-4 d-flex align-items-center justify-content-center text-darker"]:[" btn-dark btn-icon ml-1 "]},shareClasses:function(){return this.isMobile?"col-4 d-flex align-items-center justify-content-center text-darker":" btn-dark btn-icon ml-1 "},watchlistClasses:function(){return this.isMobile?"col-4 d-flex align-items-center justify-content-center text-darker":" btn-dark btn-icon ml-1 "}}},s=(e(747),e(32)),i=Object(s.a)(a,function(){var t=this,n=t._self._c;return n("div",{staticClass:"icon-actions",class:{"row h-full":t.isMobile}},[n("a",{staticClass:"icon-btn-style",class:t.watchlistClasses,style:t.customStyle,on:{click:function(n){return n.preventDefault(),t.$emit("toggle-watchlist")}}},[n("i",{class:{"icon-bookmark-empty fa-xs":!t.isWatchlist,"icon-bookmark fa-xs":1==t.isWatchlist}})]),t._v(" "),n("a",{staticClass:"icon-btn-style",class:t.shareClasses,style:t.customStyle,on:{click:function(n){return n.preventDefault(),t.$emit("share")}}},[n("i",{staticClass:"icon-share-android fa-xs"})]),t._v(" "),n("a",{staticClass:"icon-btn-style",class:t.clapClasses,style:t.customStyle,on:{mousedown:function(n){return t.$emit("clap-start")},mouseleave:function(n){return t.$emit("clap-stop")},mouseup:function(n){return t.$emit("clap-stop")},touchstart:function(n){return t.$emit("clap-start")},touchend:function(n){return t.$emit("clap-stop")},touchcancel:function(n){return t.$emit("clap-stop")}}},[n("div",{staticClass:"likes"},[t.userClaps?n("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.userClaps))]):t._e(),t._v(" "),n("i",{staticClass:"fa fa-thumbs-up fa-xs"})])])])},[],!1,null,"8880052e",null);n.default=i.exports},792:function(t,n,e){t.exports={}},837:function(t,n,e){"use strict";e(792)},931:function(t,n,e){"use strict";e.r(n);e(15),e(73),e(45),e(142),e(22),e(13),e(101);var a={name:"ShowcaseActions",components:{IconActions:e(754).default},props:{hasMainButton:{type:Boolean,default:!1},hasDownloadButton:{type:Boolean,default:!1},mainButtonLabel:{type:String,default:""},mainButtonAction:{type:String,default:""},downloadButtonLabel:{type:String,default:""},clapinterval:{type:[Boolean,Number],default:0},userClaps:{type:[Number,String],default:0},isWatchlist:{type:[Number,Boolean],default:0},episode:{type:Object,default:function(){return{}}},actions:{type:Object,default:function(){return{}}},id:{type:[Number,String],default:null},type:{type:String,default:""}},emits:["play","buy","subscription","download","toggle-watchlist","clap-start","clap-stop","share"],data:function(){return{cartItemIds:[],cartStorageListener:null}},computed:{isBasketActive:function(){var t;if(!this.$store)return!0;var n=null===(t=this.$store.state)||void 0===t?void 0:t.basketActive;return void 0===n||Boolean(n)},mainButtonDisplayLabel:function(){var t;if(null===(t=this.actions)||void 0===t||null===(t=t.mainButton)||void 0===t||!t.label)return this.mainButtonLabel;var n=this.actions.mainButton.label;return this.ChooseLang(n.en,n.fa)},showEpisodeNumber:function(){var t;return"play"===this.mainButtonAction&&(null===(t=this.episode)||void 0===t?void 0:t.id)},cartTargetId:function(){var t;if(!this.isBasketActive)return null;if("buy"!==this.mainButtonAction)return null;var n=null!==(t=this.episode&&null!=this.episode.id?this.episode.id:null)&&void 0!==t?t:this.id;return null!=n?String(n):null},shouldShowRemoveButton:function(){return!!this.cartTargetId&&this.cartItemIds.includes(this.cartTargetId)},mainButtonIcon:function(){return"play"===this.mainButtonAction?"fa fa-play pr-2":"subscription"===this.mainButtonAction?"fa fa-id-card pr-2":"buy"===this.mainButtonAction?"fa fa-shopping-cart pr-2":"fa fa-play pr-2"},removeButtonLabel:function(){return"function"==typeof this.$te&&this.$te("cart.remove")?this.$t("cart.remove"):"حذف از سبد"}},watch:{isBasketActive:{immediate:!0,handler:function(t){t?(this.syncCartItems(),this.attachCartListener()):(this.cartItemIds=[],this.detachCartListener())}}},mounted:function(){this.isBasketActive&&(this.syncCartItems(),this.attachCartListener())},beforeDestroy:function(){this.detachCartListener()},methods:{handleMainAction:function(){var t=this.mainButtonAction;"play"===t?this.$emit("play"):"buy"===t?this.$emit("buy"):"subscription"===t&&this.$emit("subscription")},handleDownload:function(){this.$emit("download")},syncCartItems:function(){if(this.isBasketActive)try{var t=localStorage.getItem("_cart");if(!t)return void(this.cartItemIds=[]);var n=JSON.parse(t);this.updateCartState(n)}catch(t){}else this.cartItemIds=[]},updateCartState:function(t){t&&Array.isArray(t.content)?this.cartItemIds=t.content.map(function(t){return t&&null!=t.id?String(t.id):null}).filter(function(t){return null!==t}):this.cartItemIds=[]},removeFromCart:function(){var t=this;if(this.cartTargetId)try{var n=localStorage.getItem("_cart"),e=n?JSON.parse(n):{content:[],amount:0};Array.isArray(e.content)||(e.content=[]),e.content=e.content.filter(function(n){return String(null==n?void 0:n.id)!==t.cartTargetId}),e.amount=e.content.reduce(function(t,n){return t+(n.tvod_price||0)},0),localStorage.setItem("_cart",JSON.stringify(e)),this.updateCartState(e),this.emitCartChange()}catch(t){}},emitCartChange:function(){this.$root.$emit("cart-updated")},attachCartListener:function(){var t=this;this.cartStorageListener||(this.cartStorageListener=function(n){n&&"_cart"===n.key&&void 0!==n.newValue&&t.syncCartItems()},window.addEventListener("storage",this.cartStorageListener),this.$root.$on("cart-updated",this.syncCartItems))},detachCartListener:function(){this.cartStorageListener&&(window.removeEventListener("storage",this.cartStorageListener),this.cartStorageListener=null),this.$root.$off("cart-updated",this.syncCartItems)},ChooseLang:function(t,n){return n&&"fa"===this.$i18n.locale?n:t},onToggleWatchlist:function(){this.$emit("toggle-watchlist",{id:this.id,type:this.type})}}},s=(e(837),e(32)),i=Object(s.a)(a,function(){var t=this,n=t._self._c;return n("div",{staticClass:"showcase-button-wrapper",attrs:{id:"showcase-button-wrapper"}},[t.shouldShowRemoveButton?n("button",{staticClass:"btn btn-danger mr-1 ml-0 btn-main-section btn-remove",on:{click:t.removeFromCart}},[n("span",{staticClass:"smallsrm"},[n("i",{staticClass:"fa fa-trash pr-2"}),t._v(" "),n("span",[t._v(t._s(t.removeButtonLabel))])])]):t.actions&&t.actions.mainButton.exist?n("button",{staticClass:"btn btn-main mr-1 ml-0 btn-main-section",on:{click:t.handleMainAction}},[n("span",{staticClass:"smallsrm"},[n("i",{class:t.mainButtonIcon}),t._v(" "),n("span",[t._v("\n        "+t._s(t.mainButtonDisplayLabel)+"\n        "),t.showEpisodeNumber?n("span",[n("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("show.episode")))]),t._v("\n          "+t._s(t.episode.episode_number)+"\n        ")]):t._e()])])]):t._e(),t._v(" "),!t.shouldShowRemoveButton&&t.actions&&t.actions.downloadButton.exist?n("button",{staticClass:"btn btn-dark btn-download mr-1 ml-0 btn-main-section",on:{click:t.handleDownload}},[n("span",{staticClass:"smallsrm"},[n("i",{staticClass:"fa fa-download pr-2"}),t._v(" "),n("span",[t._v(t._s(t.downloadButtonLabel))])])]):t._e(),t._v(" "),t.actions&&(t.hasMainButton||t.hasDownloadButton)?t._e():n("button",{staticClass:"btn btn-main mr-1 ml-0"},[n("span",{staticClass:"smallsrm"},[n("b-spinner",{attrs:{small:""}})],1)]),t._v(" "),n("IconActions",{staticClass:"ml-1",attrs:{variant:"desktop","clap-active":Boolean(t.clapinterval),"user-claps":t.userClaps,"is-watchlist":t.isWatchlist},on:{"clap-start":function(n){return t.$emit("clap-start")},"clap-stop":function(n){return t.$emit("clap-stop")},share:function(n){return t.$emit("share")},"toggle-watchlist":t.onToggleWatchlist}})],1)},[],!1,null,"d2f1642a",null);n.default=i.exports}}]);