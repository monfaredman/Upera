(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{1096:function(e,t,o){"use strict";o(999)},1097:function(e,t,o){var r=o(56)(function(i){return i[1]});r.push([e.i,".site-logo img[data-v-dfc664c0]{opacity:.3!important}[data-v-dfc664c0] .full-screen-player.vjs-fluid{overflow:hidden!important}.movie-player-page[data-v-dfc664c0]{height:100%;position:relative;width:100%}.report-modal[data-v-dfc664c0]{align-items:center;background:rgba(0,0,0,.7);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.modal-container[data-v-dfc664c0]{background:#fff;border-radius:8px;max-width:600px;padding:1rem;width:90%}.header[data-v-dfc664c0]{text-align:right}.sm-exit-svg[data-v-dfc664c0]{cursor:pointer;width:24px}.hamshahri[data-v-dfc664c0]{align-items:flex-start;display:flex;justify-content:space-between;left:0;padding:16px;position:absolute;right:0;top:0;z-index:10}.site-logo[data-v-dfc664c0]{position:absolute;right:16px;top:16px;z-index:11}.site-logo img[data-v-dfc664c0]{height:40px;width:auto}.back-button[data-v-dfc664c0]{align-items:center;background:#525252;border:none;border-radius:8px;cursor:pointer;display:flex;gap:8px;height:40px;justify-content:center;padding:12px 28px;transition:background .3s;width:131px}.back-button[data-v-dfc664c0]:hover{background:#6a6a6a}.back-text[data-v-dfc664c0]{color:#f5f5f5;font-size:16px;font-weight:600;height:3rem;line-height:3.1rem;margin:0 0 0 8px;text-align:right}.video-overlay[data-v-dfc664c0]{display:flex;justify-content:space-between;left:10px;position:absolute;right:10px;top:10px;z-index:500}.report-button[data-v-dfc664c0]{background:rgba(0,0,0,.6);border:none;border-radius:4px;color:#fff;cursor:pointer;padding:8px}.report-button[data-v-dfc664c0]:hover{background:rgba(0,0,0,.8)}.next-movie-overlay[data-v-dfc664c0]{background:rgba(0,0,0,.7);border-radius:8px;bottom:60px;cursor:pointer;padding:10px;position:absolute;right:20px;z-index:600}.next-movie-content p[data-v-dfc664c0]{color:#fff;margin:0 0 5px}.next-movie-content img[data-v-dfc664c0]{border-radius:4px;width:100%}.player-wrapper[data-v-dfc664c0]{height:100%}.video-loading-spinner[data-v-dfc664c0]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}",""]),r.locals={},e.exports=r},1168:function(e,t,o){"use strict";o.r(t);var r=o(23),n=(o(60),o(34),o(69),o(44),o(40),o(11),o(96),{components:{VideoPlayer:o(764).default},beforeRouteLeave:function(e,t,o){this.$swal&&this.$swal.close(),o()},layout:"empty",data:function(){return{movieTitle:"",posterUrl:"",creditsData:{},videoUrl:"",vastUrl:"",tracks:[],loading:!0,guest:!0,show_report:!1,report_problem_type:null,report_details:"",report_button:!1,soon:!1,reportOptions:[{value:1,label:"report.labeling_problem"},{value:2,label:"report.video_problem"},{value:3,label:"report.sound_problem"},{value:4,label:"report.caption_problem"}],recentlyTime:200,showNextMovie:!1,suggestion:null,suggestionBackdrop:"",startTime:0,fullrateData:null,contentType:"video"}},mounted:function(){this.$auth&&this.$auth.loggedIn&&(this.guest=!1),this.loadMovie(),window.addEventListener("popstate",this.handlePopState)},beforeDestroy:function(){this.$swal&&this.$swal.close(),window.removeEventListener("popstate",this.handlePopState)},methods:{handlePopState:function(){this.$swal&&this.$swal.close()},showErrorAlert:function(data){var e=this,t="fa"===this.$i18n.locale?data.message_fa:data.message;t||(t=this.$t("player.error1"));var o={back:{text:this.$t("player.back"),value:"back",closeModal:!0,className:"swal-back"}};1===data.show_download&&(o.download={text:this.$t("player.download"),value:"download",closeModal:!0}),1===data.show_ekran&&(o.download={text:this.$t("show.buy_ticket"),value:"download",closeModal:!0}),1===data.show_subscription&&(o.subscribe={text:this.$t("player.subscribe"),value:"subscribe",closeModal:!0}),this.$auth.loggedIn||1!==data.show_login||Object.assign(o,{login:{text:this.$t("nav.login"),value:"login",closeModal:!0}}),this.$swal({title:t,icon:"error",dangerMode:!0,buttons:o}).then(function(t){switch(t){case"back":default:window.history.length>2?e.$router.go(-1):e.$router.push({name:"movie-id",params:{id:e.$route.params.id}});break;case"subscribe":e.$store.dispatch("subscription/SHOW_MODAL",{content_type:"movie",content_id:e.$route.params.id});break;case"download":e.$router.push({name:"movie-payment-id",params:{id:e.$route.params.id},query:{force_to_buy:1}});break;case"login":e.$store.dispatch("login/SHOW_MODAL",{premessage:null,premobile:null,preredirect:null,prerefresh:!1})}})},loadMovie:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var o,r,n,l,data,d,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.$route.params.id){t.next=1;break}return t.abrupt("return");case 1:return r=e.$cookiz.get("ref")||"",n=e.guest?"/ghost/get/watch/movie-hls/".concat(o,"/1").concat(r?"?ref=".concat(r):""):"/get/watch/movie-hls/".concat(o,"/1").concat(r?"?ref=".concat(r):""),t.next=2,e.$axios.get(n);case 2:if(200!==(l=t.sent).status){t.next=4;break}return data=l.data.data,e.movieTitle="fa"===e.$i18n.locale&&data.video[0].name_fa?data.video[0].name_fa:data.video[0].name,e.posterUrl=data.cdn.lg_backdrop+data.video[0].backdrop,d=data.video[0].video.includes("?")?data.video[0].video+"&nosub=1":data.video[0].video+"?nosub=1",e.startTime=data.video[0].current_time||0,e.creditsData={first_credits:data.first_credits||null,after_credits:data.after_credits||null,final_credits:data.final_credits||null},console.log(1111,data),data.fullrate_data&&(e.fullrateData=data.fullrate_data),t.next=3,fetch(d,{method:"HEAD"});case 3:t.sent.ok?(e.videoUrl=d,e.vastUrl=data.vast,e.soon=!1):e.soon=!0,data.new_subtitle&&Array.isArray(data.new_subtitle)&&(e.tracks=data.new_subtitle.map(function(track,e){return{kind:"captions",label:track.language,src:track.url,default:0===e}})),data.suggestion&&(e.suggestion=data.suggestion,e.suggestionBackdrop=data.cdn.md_backdrop+data.suggestion.backdrop),t.next=5;break;case 4:e.showErrorAlert(l.data.data);case 5:t.next=7;break;case 6:t.prev=6,c=t.catch(0),e.showErrorAlert(c.response.data);case 7:return t.prev=7,e.loading=!1,t.finish(7);case 8:case"end":return t.stop()}},t,null,[[0,6,7,8]])}))()},handlePlayerReady:function(e){this.startTime&&e.currentTime&&e.currentTime(this.startTime)},handleTimeUpdate:function(e){var t=e.currentTime,o=e.duration,r=e.player;if(Math.floor(t)>=this.recentlyTime){this.recentlyTime=Math.floor(t)+200;var n={current_time:Math.floor(t),duration_time:Math.floor(o),movie_id:this.$route.params.id};this.guest?this.$axios.post("/ghost/create/watch/movie/recently",n):this.$axios.post("/create/watch/movie/recently",n)}return this.creditsData.final_credits&&t>=this.creditsData.final_credits&&this.suggestion||!this.creditsData.final_credits&&o-t<=100&&this.suggestion?this.showNextMovie=!0:this.showNextMovie=!1,r},handleEnded:function(){this.suggestion&&this.playNextMovie()},playNextMovie:function(){this.$router.push({name:"movie-show-id",params:{id:this.suggestion.id}})},goBack:function(){window.history.length>2?this.$router.go(-1):this.$router.push({name:"movie-id",params:{id:this.$route.params.id}})},openReport:function(){var e;this.show_report=!0;var t=null===(e=this.$refs.moviePlayer)||void 0===e?void 0:e.player;t&&t.pause()},closeReport:function(){var e;this.show_report=!1;var t=null===(e=this.$refs.moviePlayer)||void 0===e?void 0:e.player;t&&t.play()},sendReport:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.report_button=!0,t.prev=1,o={type:e.report_problem_type,details:e.report_details,id:e.$route.params.id},t.next=2,e.$axios.post("/create/report/movie",o);case 2:"success"===t.sent.data.status&&(e.report_button=!1,e.closeReport(),e.$alertify.logPosition("top right"),e.$alertify.success("Successful Send, our team will check it soon")),t.next=4;break;case 3:t.prev=3,r=t.catch(1),e.report_button=!1,console.error("Report Error:",r);case 4:case"end":return t.stop()}},t,null,[[1,3]])}))()}}}),l=(o(1096),o(28)),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-container"},[t("div",{staticClass:"hamshahri"},[t("div",{staticClass:"site-logo"},[t("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":o(474),alt:"Logo"}})]),e._v(" "),t("button",{staticClass:"back-button",on:{click:e.goBack}},[t("i",{staticClass:"fa fa-chevron-left",staticStyle:{color:"white"}}),e._v(" "),t("p",{staticClass:"back-text"},[e._v("بازگشت")])]),e._v(" "),e.loading?t("div",{staticClass:"video-loading-spinner"}):e._e(),e._v(" "),e.soon?t("p",{staticClass:"soon"},[e._v("به زودی...")]):e._e(),e._v(" "),e.soon?t("button",{staticClass:"btn btn-primary btn-lg fw-bold refresh-btn",on:{click:e.reloadPage}},[e._v("\n      بارگذاری مجدد\n    ")]):e._e()]),e._v(" "),t("div",{staticClass:"player-wrapper"},[e.videoUrl&&!e.loading?t("VideoPlayer",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],ref:"moviePlayer",staticClass:"full-screen-player vjs-fluid",attrs:{playerid:"movie-player",stream:e.videoUrl,"data-poster":e.posterUrl,title:e.movieTitle,"vast-url":e.vastUrl||"",tracks:e.tracks,"player-auto-play":!0,"fullrate-data":e.fullrateData,"content-id":e.$route.params.id,"content-type":e.contentType,"credits-data":e.creditsData},on:{"credits-skipped":e.handleEnded,ready:e.handlePlayerReady,timeupdate:e.handleTimeUpdate,ended:e.handleEnded}}):e._e()],1),e._v(" "),e.showNextMovie&&e.suggestion?t("div",{staticClass:"next-movie-overlay",on:{click:e.playNextMovie}},[t("div",{staticClass:"next-movie-content"},[t("p",[e._v(e._s(e.$t("player.next"))+": "+e._s(e.suggestion.name_fa))]),e._v(" "),t("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],attrs:{"data-src":e.suggestionBackdrop,alt:"Next Movie Backdrop"}})])]):e._e()])},[],!1,null,"dfc664c0",null);t.default=component.exports;installComponents(component,{VideoPlayer:o(764).default})},999:function(e,t,o){var content=o(1097);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(57).default)("22a57812",content,!0,{sourceMap:!1})}}]);